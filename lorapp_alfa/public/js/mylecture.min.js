var myLecture={savedText:"",noteElementtId:0,printContentById:function(d){var a=document.getElementById(d);var c=new String('<link href="'+global.url+'/css/print.css" rel="stylesheet" type="text/css"><div align="center" style="cursor: pointer; width:100%;"><div onclick="window.print();" style="background-color: #D6D6D6;width: 200px;margin: 40px;padding-bottom: 10px;padding-top: 10px;border-radius: 10px;cursor: pointer;"><span style="color: blue; ">CLIC PARA IMPRIMIR</span></div></div>');var b=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");b.document.write(c+a.innerHTML);b.document.close();b.focus()},changeFontSize:function(b,d){var a=parseInt($(b).css("font-size"));if(d==="+"){a=a+1}else{if(d==="-"){a=a-1}}$(b).css({"font-size":a})},saveSelection:function(){if(window.getSelection){var a=window.getSelection();if(a.getRangeAt&&a.rangeCount){return a.getRangeAt(0)}}else{if(document.selection&&document.selection.createRange){return document.selection.createRange()}}return null},restoreSelection:function(a){if(a){if(window.getSelection){var b=window.getSelection();b.removeAllRanges();b.addRange(a)}else{if(document.selection&&a.select){a.select()}}}},floatMenu:function(a){myLecture.savedText=myLecture.saveSelection();setTimeout(function(){var b=myLecture.savedText.toString().length===0;if(!b){$("#highlight-button").css({position:"absolute",top:a.pageY,left:a.pageX});$("#highlight-button").show()}else{$("#highlight-button").hide();$("#float_note").hide()}},10)},highlighter:function(){if(!myLecture.savedText){return}var a=myLecture.savedText+"";$("#note").val("");$("#selected_text").empty();$("#selected_text").append(a);$("body p").highlight(a);myLecture.restoreSelection(myLecture.savedText);return false},unHighlight:function(){$("body p").unhighlight()},addNote:function(b){if(!myLecture.savedText){return}var a=myLecture.savedText+"";$("#note").val("");$("#selected_text").empty();$("#selected_text").append(a);$("#selectedtext").val(a);$("#highlight-button").hide();$("#highlight-button").css({position:"fixed",top:-9999});myLecture.restoreSelection(myLecture.savedText);$("#float_note").show();return false},closeNote:function(){$("#highlight-button").hide();$("#float_note").hide()},saveNote:function(){var a=$("#form_note_create").serialize();util.cursorBusy();$.ajax({data:a,type:"POST",dataType:"json",url:global.url+"/mynotes/savenote",success:function(b){util.cursorNormal();$("#highlight-button").hide();$("#float_note").hide();if(b.valid){alert("Informaci√≥n guardada correctamente")}else{alert("Error: "+b.error)}}})},openNoteLoader:function(){myLecture.getNote();$("#note_loader_container").show()},closeNoteLoader:function(){$("#note_loader_container").hide();$("#note_loader").empty()},getNote:function(){var a={};a.id=0;util.cursorBusy();$.ajax({data:a,type:"POST",dataType:"json",url:global.url+"/mynotes",success:function(e){util.cursorNormal();if(e.valid){var d=e.response;var c="";for(var b in d){c+="<div id=rn"+b+">";c+='<div class="notes_container notes_expandable">';c+='<p><q class="notes_fromtext">'+d[b].selectedtext+"</q></p>";c+='<p class="notes_title_nota">NOTA:</p>';c+='<p class="notes_title_nota_txt" id="note_text'+b+'">'+d[b].note+"</p>";c+='<p><textarea id="note_text_edit'+b+'" rows="5" style="width: 96%; display: none">'+d[b].note+"</textarea></p>";c+='<div align="right" class="note_option">';c+='<span id="btn_note_edit'+b+'" onclick="myLecture.editNoteShow('+b+', true)">Editar</span>';c+='<span id="btn_note_save'+b+'" onclick="myLecture.updateNote('+d[b].id+", "+b+')" style="display: none">Guardar</span>';c+='<span id="btn_note_cancel'+b+'" onclick="myLecture.editNoteShow('+b+', false)" style="display: none">Cancelar</span>';c+='<span id="btn_note_delete'+b+'" onclick="myLecture.deleteNote('+d[b].id+","+b+')">Eliminar</span>';c+="</div>";c+="</div>";c+="<hr>";c+="</div>"}$("#note_loader").empty();$("#note_loader").append(c)}else{alert("Error: "+e.error)}}})},updateNote:function(c,a){myLecture.noteElementtId=a;var b={};b.id=c;b.note=$("#note_text_edit"+a).val();util.cursorBusy();$.ajax({data:b,type:"GET",dataType:"json",url:global.url+"/mynotes/savenote",success:function(d){util.cursorNormal();$("#highlight-button").hide();$("#float_note").hide();if(d.valid){$("#note_text"+myLecture.noteElementtId).empty();$("#note_text"+myLecture.noteElementtId).append($("#note_text_edit"+myLecture.noteElementtId).val());myLecture.editNoteShow(myLecture.noteElementtId,false)}else{alert("Error: "+d.error)}}})},editNoteShow:function(b,a){if(a){$("#note_text"+b).hide();$("#btn_note_edit"+b).hide();$("#btn_note_cancel"+b).show();$("#note_text_edit"+b).show();$("#btn_note_save"+b).show()}else{$("#note_text"+b).show();$("#btn_note_edit"+b).show();$("#btn_note_cancel"+b).hide();$("#note_text_edit"+b).hide();$("#btn_note_save"+b).hide();$("#note_text_edit"+b).val($("#note_text"+b).html())}},deleteNote:function(c,a){var b={};b.id=c;util.cursorBusy();$.ajax({data:b,type:"POST",dataType:"json",url:global.url+"/mynotes/delete",success:function(d){util.cursorNormal();$("#highlight-button").hide();$("#float_note").hide();if(d.valid){$("#rn"+a).remove()}else{alert("Error: "+d.error)}}})}};